<?php #//php_start\\;			class _QUERY_CONTROLLER	{		public $qstmt_handler = null;		public $conn_handler = null;				public function __construct($qstmt, $conn)		{			$this->conn_handler = $conn;						$this->qstmt_handler = $qstmt;					}				public function data($data = "", $static_val = "")		{			if(is_array($data)){				$fields = array();				$values = array();				foreach($data as $field => $value){					$fields[] = '`' . $field . '`';					$values[] = "'" . $this->escape_string($value) . "'";				}								$qstmt = $this->qstmt_handler . " (" . implode(', ', $fields) . ") VALUES (" . implode(', ', $values) . ")";			}else{				$qstmt = $this->qstmt_handler . " (`" . $data . "`) VALUES ('" . $this->escape_string($static_val) . "')";			}						return new _QUERY_CONTROLLER($qstmt, $this->conn_handler);		}				public function set($data = "", $static_value = "")		{						$fields = array();			if(is_array($data)){				foreach($data as $field => $value){					$fields[] = '`' . $field . '` = ' . "'" . $this->escape_string($value) . "'";				}			}else{				$fields[] = '`' . $data . '` = ' . "'" . $this->escape_string($static_value) . "'";			}						$qstmt = $this->qstmt_handler . ' SET ' . implode(', ', $fields);						return new _QUERY_CONTROLLER($qstmt, $this->conn_handler);		}				public function from($table_name){			$qstmt = $this->qstmt_handler . ' FROM ' . $table_name . ' ';			return new _QUERY_CONTROLLER($qstmt, $this->conn_handler);		}				public function join($table_name)		{			$qstmt = $this->qstmt_handler . ' JOIN ' . $table_name . ' ';			return new _QUERY_CONTROLLER($qstmt, $this->conn_handler);		}				public function left_join($table_name)		{			$qstmt = $this->qstmt_handler . ' LEFT JOIN ' . $table_name . ' ';			return new _QUERY_CONTROLLER($qstmt, $this->conn_handler);		}				public function right_join($table_name)		{			$qstmt = $this->qstmt_handler . ' RIGHT JOIN ' . $table_name . ' ';			return new _QUERY_CONTROLLER($qstmt, $this->conn_handler);		}		public function inner_join($table_name)		{			$qstmt = $this->qstmt_handler . ' INNER JOIN ' . $table_name . ' ';			return new _QUERY_CONTROLLER($qstmt, $this->conn_handler);		}				public function on($conp)		{			$qstmt = $this->qstmt_handler .  ' ON ' . $conp . ' ';			return new _QUERY_CONTROLLER($qstmt, $this->conn_handler);		}				public function on_option($conp)		{			$qstmt = $this->qstmt_handler .  ' ' . $conp . ' ';			return new _QUERY_CONTROLLER($qstmt, $this->conn_handler);		}				public function option($conp)		{			$qstmt = $this->qstmt_handler .  ' ' . $conp . ' ';			return new _QUERY_CONTROLLER($qstmt, $this->conn_handler);		}				public function order_by($request)		{			$qstmt = $this->qstmt_handler .  ' ORDER BY ' . $request . ' ';			return new _QUERY_CONTROLLER($qstmt, $this->conn_handler);		}				public function group_by($request)		{			$qstmt = $this->qstmt_handler .  ' GROUP BY ' . $request . ' ';			return new _QUERY_CONTROLLER($qstmt, $this->conn_handler);		}				public function limit($request)		{			$qstmt = $this->qstmt_handler .  ' LIMIT ' . $request . ' ';			return new _QUERY_CONTROLLER($qstmt, $this->conn_handler);		}				public function where($where = "")		{						/**			* Check the where statement is set to an array			*/			if(is_array($where) && count($where) > 0){				$where_fields = array();								$counter = 1;				/**				* SQL where statement extension				*/				$track_extension = false;								foreach($where as $wf => $v){									$where_fields[] = ' ' . $wf . ' ';										if(is_array($v)){						foreach($v as $key => $val){							if(is_array($val)){								foreach($val as $tk => $tv){									$where_fields[] .= $key . " '" . $this->escape_string($tk) . "' " . $tv;									$track_extension = true;								}							}else{								$where_fields[] .= $key . " '" . $this->escape_string($val) . "'";								$track_extension = false;							}						}					}else{						$where_fields[] .= ' = ' . "'" . $this->escape_string($v) . "' ";						$track_extension = false;					}										if($counter < count($where)){						if(!$track_extension){							/**							* default sql concatinator							*/							$where_fields[] .=  ' AND ';						}					}										$counter++;				}								$where = ' where ' . implode(' ', $where_fields);							}else{				$where = $where != "" ? ' where ' . $where : "";			}						$qstmt = $this->qstmt_handler . $where;			return new _QUERY_CONTROLLER($qstmt, $this->conn_handler);		}				/**		* Escape string on time of inserting		* data into database.		*/		public function escape_string($value)		{			if (get_magic_quotes_gpc()) {				$value = stripslashes($value);			}			return mysql_real_escape_string($value, $this->conn_handler);		}				public function _debug()		{			return $this->qstmt_handler;		}				/**		* Get Affected rows		*/				public function affected_rows()		{			return @mysql_affected_rows($this->conn_handler);		}				/**		* Get new inserted ID		*/		public function insert_id()		{			return @mysql_insert_id($this->conn_handler);		}				public function run($as_string = false)		{			if($as_string){				return $this->qstmt_handler;			}else{				try{					//echo $this->qstmt_handler;					//exit;					$qstmt = @mysql_query($this->qstmt_handler, $this->conn_handler);					if(!$qstmt){						 throw new Exception($this->qstmt_handler);					}					return new _QUERY_CONTROLLER($qstmt, $this->conn_handler);									}catch(Exception $e){					trigger_error($e->getMessage(), E_USER_WARNING);				}			}		}				/**		* Fetch the query by object		*/		public function fetch_object()		{			$data = array();			while($row = mysql_fetch_object($this->qstmt_handler)){				$data[] = $row;			}						return $data;		}		/**		* Fetch the query by array		*/		public function fetch_array()		{			$data = array();			while($row = mysql_fetch_array($this->qstmt_handler)){				$data[] = $row;			}						return $data;		}		/**		* Fetch the query by assoc		*/		public function fetch_assoc()		{			$data = array();			while($row = mysql_fetch_assoc($this->qstmt_handler)){				$data[] = $row;			}						return $data;		}		/**		* Fetch the query by row		*/		public function fetch_row()		{			$data = array();			while($row = mysql_fetch_row($this->qstmt_handler)){				$data[] = $row;			}						return $data;		}		/**		* Get num fields in the query		*/		public function num_fields()		{			return mysql_num_fields($this->qstmt_handler);		}				public function num_rows()		{			return @mysql_num_rows($this->qstmt_handler);		}				public function free_result()		{			return mysql_free_result($this->qstmt_handler);		}				function field_name($fieldno)		{			return mysql_field_name($this->qstmt_handler, $fieldno);		}				public function field_type($fieldno)		{			return mysql_field_type($this->qstmt_handler, $fieldno);		}				public function field_info($fieldno = NULL)		{			if (is_null($fieldno)) {				return mysql_fetch_field($this->qstmt_handler);			} else {				return mysql_fetch_field($this->qstmt_handler, $fieldno);			}		}				public function data_seek($row)		{			if($this->num_rows($this->qstmt_handler)) return mysql_data_seek($this->qstmt_handler, $row);		}	}	#//php_end\\;?>